import { renderToString } from 'react-dom/server';
import React from 'react';
import LineGraph from '../src';

export function LineGraphTime() {
    const series = [
        [-87882001, 488973],
        [-85200001, 420502],
        [-82608001, 394682],
        [-79929601, 416382],
        [-77251201, 419455],
        [-74832001, 339405],
        [-72157201, 367635],
        [-69565201, 351660],
        [-66886801, 332654],
        [-64294801, 247359],
        [-61616401, 208390],
        [-58938001, 156520],
        [-56346001, 839480],
        [-53664001, 641599],
        [-51072001, 543787],
        [-48393601, 556649],
        [-45715201, 649386],
        [-43209601, 570000],
        [-40534801, 572000],
        [-37942801, 733500],
        [-35264401, 654500],
        [-32672401, 529500],
        [-29994001, 462157],
        [-27315601, 434353],
        [-24723601, 1120000],
        [-22041601, 1080000],
        [-19449601, 1000000],
        [-16771201, 1047371],
        [-14092801, 1242000],
        [-11673601, 1234689],
        [-8998801, 1270413],
        [-6406801, 1475003],
        [-3728401, 1307301],
        [-1136401, 1080638],
        [1541999, 953822],
        [4220399, 1034252],
        [6812399, 1062600],
        [9494399, 1146432],
        [12086399, 1225625],
        [14764799, 1258291],
        [17443199, 1272302],
        [19862399, 1345000],
        [22537199, 1440000],
        [25129199, 1606566],
        [27807599, 1673130],
        [30399599, 1747424],
        [33077999, 1791964],
        [35756399, 1845292],
        [38348399, 1904441],
        [41030399, 1950882],
        [43622399, 1993966],
        [46300799, 2040936],
        [48979199, 2088656],
        [51398399, 2070119],
        [54073199, 2044580]
    ];

    const props = {
        name: 'graph-time',
        width: 500,
        height: 300,
        startTime: 1500000000,
        padding: [20, 0, 20, 0],
        lines: [
            {
                key: 'timedata1',
                data: series,
                smooth: true,
                color: ([valX]) => {
                    if (valX < 1527807600) {
                        return '#06c';
                    }

                    return '#c06';
                }
            },
            {
                key: 'timedata2',
                data: [[series[0][0], 0]].concat(series.map(([xVal, yVal]) => [xVal, yVal * 0.5])),
                smooth: true,
                fill: true,
                color: 'rgba(60, 60, 60, 0.4)'
            }
        ]
    };

    return (
        <LineGraph {...props} />
    );
}

function render() {
    return renderToString(<LineGraphTime />);
}

if (require.main === module) {
    const output = render();

    process.stdout.write(output);
}

